Upgrade Notes
==============

From Hypermail 2.4.0 to Hypermail 3.0.0
-----------------------------------------

Due to the markup changes to support HTML5 and enhance the WAI
support, it is strongly recommended that you delete all existing HTML
files and directories in the archive directory and that you rebuild
your archive completely using version 3.0.0 Failure to do so may
produce invalid markup in some of your messages or have duplicate
links that point to replies and other messages (the 2.4.0 + the 3.0.0
ones) in your current messages.

Except for some few exceptions related to specific options (see here
below), all generated markup was reviewed with the help of experts of
the WAI community to make sure it is accessible. We may have missed
some files that are only generated when using specific configuration
options; if that's the case, please open an issue and we'll look at
it.

Hypermail is now using PCRE2. If you were using any of the filtering
options, you should check if your regular expressions need updating.
For more info see for example:

  https://wiki.php.net/rfc/pcre2-migration:

All style that used to be embeeded in hypermail's generated archive
files was moved to an external stylesheet. This stylesheet,
hypermail.css, will be generated by default in your archive directory
unless you use options to give a link to an external one. Together
with this move, more markup was added to allow a better use of CSS and
better accessibility and use of screen readers.

You can find hypermail's current stylesheet under docs/hypermail.css.
If you were already relying on an external stylesheet file, we advise
you to check hypermail's default shipped one to see if there are
changes you'd be interested in supporting in your own stylesheet file.

The following configuration options are now considered deprecated and
will be ignored. They will be removed from the code base in the next
hypermail release:

- showhr, usetable, iquotes. All of these options have been made
  obsolete by markup changes in hypermail. You can emulate their
  behavior by using CSS.

The following options are being considered as future candidates for
deprecation:

- showhtml. We are not sure if people are using this option with
  values 1 and 2. The markup that's produced isn't so special and we
  think that it'd be better to merge whatever features people deem
  useful there to the normal markup and use CSS to control
  presentation. Minimal work has been done with this option other than
  to make sure the produced markup is valid. The markup that's
  produced with this option was not given a WAI review.

The following options are now considered unstable since version 2.4
and are considered future candidates for deprecation unless people
state they are being used and someone proposes to adopt their code and
gives it more love and maintenance:

- linkquotes, searchbackmsgnum, link_to_replies, quote_hide_threshold,
  quote_link_string. Note that all these options are related to
  linkquotes. No work was done in 3.0.0 regarding these options.
  
The yearly and monthly summaries seem to have been broken since some
long time ago. Some few updates were done but they require more
love to make them more useful. In particular, messages are missing
links pointing back to the summaries. Note that you could do this
by using the different navbar options.

From Hypermail 2.3.0 to Hypermail 2.4.0
-----------------------------------------

Hypermail will now detect and link with a system libpcre if it's
available and current.  Otherwise, it will compile the bundled
libpcre. You can force the compile with the bundled one with the
--enable-bundled-pcre configure option.

The configuration directive "htmlmessage_deleted" has been
renamed "htmlmessage_deleted_spam".

The "deleted" configuration directive has been deprecated
in favor of "annotated". However, for backwards compatibility
with legacy archives, it will continue to be honored.

From Hypermail 1.x to Hypermail 2.x 
-----------------------------------
!!!!WARNING!!!!

Hypermail 2.x HTML output files, indexes, etc are not compatible with 1.x 
files.  When installing 2.x, all existing HTML files in the specified output 
directory must be removed first.  

Use the original 1.x mailbox files to regenerate the new 2.x archive. 
If the mailboxes are not available it should be possible to use the 
script hypetombox.pl in the contrib/ directory.
