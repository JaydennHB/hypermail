Upgrade Notes
==============

From Hypermail 2.4.0 to Hypermail 3.0.0
-----------------------------------------

Due to the markup changes to support HTML5 and enhance the WAI
support, it is strongly recommended that you delete all existing HTML
files and directories in the archive directory and that you rebuild
your archive completely using version 3.0.0 Failure to do so may
produce invalid markup in some of your messages or have duplicate
links that point to replies and other messages (the 2.4.0 + the 3.0.0
ones) in your current messages.

All generated markup was reviewed with the help of experts of the WAI
community to make sure it is accessible. Wwe may have missed some files
that are only generated when using specific configuration options; if
that's the case, please open an issue and we'll look at it.

Hypermail is now using PCRE2. If you were using any of the filtering
options, you should check if your regular expressions need updating.
For more info see for example:

  https://wiki.php.net/rfc/pcre2-migration:
 
The indextable option was deprecated.

The linkquotes has been broken since at least 2.4.0 and no work was
done in 3.0.0 to try to fix it. The inlinehtml options may not be
working well. Test them out before upgrading. These options may be
potentially deprecated in a future version of hypermail unless people
send feedback (and code if possible) asking to preserve and update
them.

The yearly and monthly summaries seem to have been broken since some
long time ago. Some few updates were done but they require more
love to make them more useful. In particular, messages are missing
links pointing back to the summaries. Note that you could do this
by using the different navbar options.

All style that used to be embeeded in hypermail's generated archive
files was moved to an external stylesheet. This stylesheet,
hypermail.css, will be generated by default in your archive directory
unless you use options to give a link to an external one. Together
with this move, more markup was added to allow a better use of CSS and
better accessibility and use of screen readers.

You can find hypermail's current stylesheet under docs/hypermail.css.
If you were already relying on an external stylesheet file, we advise
you to check hypermail's default shipped one to see if there are
changes you'd be interested in supporting in your own stylesheet file.

From Hypermail 2.3.0 to Hypermail 2.4.0
-----------------------------------------

Hypermail will now detect and link with a system libpcre if it's
available and current.  Otherwise, it will compile the bundled
libpcre. You can force the compile with the bundled one with the
--enable-bundled-pcre configure option.

The configuration directive "htmlmessage_deleted" has been
renamed "htmlmessage_deleted_spam".

The "deleted" configuration directive has been deprecated
in favor of "annotated". However, for backwards compatibility
with legacy archives, it will continue to be honored.

From Hypermail 1.x to Hypermail 2.x 
-----------------------------------
!!!!WARNING!!!!

Hypermail 2.x HTML output files, indexes, etc are not compatible with 1.x 
files.  When installing 2.x, all existing HTML files in the specified output 
directory must be removed first.  

Use the original 1.x mailbox files to regenerate the new 2.x archive. 
If the mailboxes are not available it should be possible to use the 
script hypetombox.pl in the contrib/ directory.
